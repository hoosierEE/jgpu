* main.cpp
#+begin_src C++ :tangle main.cpp
#include <arrayfire.h>
// Generate random data, sum and print the result.
int main(void)
{
    // Generate 10,000 random values
    af::array a = af::randu(10000);

    // Sum the values and copy the result to the CPU:
    double sum = af::sum<float>(a);

    printf("sum: %g\n", sum);
    return 0;
}
#+end_src

* Makefile
#+begin_src makefile :tangle Makefile
LIBS=-lafcpu
LIB_PATHS=-L/opt/arrayfire/lib
INCLUDES=-I/opt/arrayfire/include
CC=g++ $(COMPILER_OPTIONS)
COMPILER_OPTIONS=-std=c++11 -g

all: main.cpp Makefile
	$(CC) main.cpp -o test $(INCLUDES) $(LIBS) $(LIB_PATHS)
#+end_src

While ~make~ succeeds, running the resulting executable with ~./test~ fails:
#+begin_example
dyld: Library not loaded: @rpath/libafcpu.3.dylib
  Referenced from: /Users/ashroyer-admin/repo/fun/jgpu/examples/hello/./test
  Reason: image not found
make: *** [all] Abort trap: 6
#+end_example

According to [[https://stackoverflow.com/a/54072747/2037637][this]], a possible fix is to update homebrew:
#+begin_src sh
brew update
brew upgrade
# brew cleanup  # not sure if this step is necessary
#+end_src
